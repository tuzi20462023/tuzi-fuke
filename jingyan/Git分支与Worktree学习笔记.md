# Git åˆ†æ”¯ä¸ Worktree å­¦ä¹ ç¬”è®°

> å­¦ä¹ æ—¥æœŸï¼š2025-12-03
> é¡¹ç›®ï¼štuzi-fukeï¼ˆåœ°çƒæ–°ä¸»â€”â€”å…”å­ï¼‰

---

## ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå±‚çº§

```
Repository (ä»“åº“)
    â”‚
    â””â”€â”€ Branch (åˆ†æ”¯) â† ä»£ç çš„ä¸åŒç‰ˆæœ¬çº¿
            â”‚
            â””â”€â”€ Worktree (å·¥ä½œæ ‘) â† å¯é€‰ï¼ç»™åˆ†æ”¯ä¸€ä¸ªç‹¬ç«‹æ–‡ä»¶å¤¹
```

---

## äºŒã€ä¸‰ä¸ªæ¦‚å¿µè¯¦è§£

### 1. åˆ†æ”¯ (Branch) - å¿…é¡»æœ‰

**æ˜¯ä»€ä¹ˆï¼š** Git çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä»£ç çš„ä¸åŒç‰ˆæœ¬çº¿

**æ¯”å–»ï¼š** ä¸åŒçš„æ•…äº‹çº¿

```
main                    â† ä¸»çº¿ï¼ˆç¨³å®šç‰ˆæœ¬ï¼‰
feature/explore         â† æ¢ç´¢åŠŸèƒ½å¼€å‘çº¿
feature/building-system â† å»ºç­‘åŠŸèƒ½å¼€å‘çº¿
feature/communication   â† é€šè®¯åŠŸèƒ½å¼€å‘çº¿
```

### 2. feature/ å‰ç¼€ - å‘½åä¹ æƒ¯ï¼Œå¯é€‰

**æ˜¯ä»€ä¹ˆï¼š** åªæ˜¯ä¸€ä¸ªå‘½åè§„èŒƒï¼Œä¸æ˜¯ Git åŠŸèƒ½

**ä½œç”¨ï¼š** è®©äººä¸€çœ¼çŸ¥é“è¿™æ˜¯"åŠŸèƒ½å¼€å‘åˆ†æ”¯"

```
âœ… feature/explore        â† è§„èŒƒå‘½å
âœ… feature/building       â† è§„èŒƒå‘½å
âœ… explore                â† ä¹Ÿå¯ä»¥ï¼Œä½†ä¸å¤Ÿæ¸…æ™°
âœ… abc123                 â† èƒ½ç”¨ï¼Œä½†åˆ«äººçœ‹ä¸æ‡‚
```

**å¸¸è§å‰ç¼€è§„èŒƒï¼š**
| å‰ç¼€ | ç”¨é€” |
|------|------|
| `feature/` | æ–°åŠŸèƒ½å¼€å‘ |
| `bugfix/` | ä¿®å¤ bug |
| `hotfix/` | ç´§æ€¥ä¿®å¤ |
| `release/` | å‘å¸ƒç‰ˆæœ¬ |

### 3. Worktree (å·¥ä½œæ ‘) - å¯é€‰ï¼Œæ–¹ä¾¿åŒæ—¶å¼€å‘

**æ˜¯ä»€ä¹ˆï¼š** ç»™åˆ†æ”¯åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼Œå¸¦ç€ Git è®°å¿†ï¼Œè·Ÿä¸»ä»“åº“å…±äº«

**æ¯”å–»ï¼š** åŒä¸€æœ¬ä¹¦çš„ä¸åŒç« èŠ‚ï¼Œæ”¾åœ¨ä¸åŒä¹¦æ¡Œä¸Šå†™

---

## ä¸‰ã€Worktree vs æ™®é€šæ–‡ä»¶å¤¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ã€æ™®é€šå¤åˆ¶æ–‡ä»¶å¤¹ã€‘                            â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“ tuzi-fuke (å¤åˆ¶)                                            â”‚
â”‚   ğŸ“ tuzi-fuke-2 (å¤åˆ¶)                                          â”‚
â”‚                                                                  â”‚
â”‚   â†’ ä¸¤ä¸ªå®Œå…¨ç‹¬ç«‹çš„ä»“åº“                                            â”‚
â”‚   â†’ å„è‡ªæœ‰å„è‡ªçš„ git å†å²                                         â”‚
â”‚   â†’ äº’ä¸ç›¸å¹²                                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ã€Worktreeã€‘                               â”‚
â”‚                                                                  â”‚
â”‚   ğŸ“ tuzi-fuke (ä¸»ä»“åº“)                                          â”‚
â”‚   ğŸ“ tuzi-fuke-explore (worktree)                                â”‚
â”‚   ğŸ“ tuzi-fuke-building (worktree)                               â”‚
â”‚                                                                  â”‚
â”‚   â†’ ä¸‰ä¸ªæ–‡ä»¶å¤¹å…±äº«åŒä¸€ä¸ª Git ä»“åº“ï¼                                â”‚
â”‚   â†’ åœ¨ explore é‡Œ commitï¼Œmain é‡Œä¹Ÿèƒ½çœ‹åˆ°                         â”‚
â”‚   â†’ åˆ†æ”¯ã€å†å²ã€è®°å½•éƒ½æ˜¯å…±é€šçš„                                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸€å¥è¯æ€»ç»“ï¼š**

```
Worktree = å¸¦ç€ Git è®°å¿†çš„æ–‡ä»¶å¤¹ï¼Œè€Œä¸”è·Ÿä¸»ä»“åº“å…±äº«è®°å¿†
```

---

## å››ã€æˆ‘çš„é¡¹ç›®å®é™…ç»“æ„

### å½“å‰ Worktree åˆ—è¡¨

| æ–‡ä»¶å¤¹è·¯å¾„                                            | å¯¹åº”åˆ†æ”¯                          | ç”¨é€”       |
| ------------------------------------------------ | ----------------------------- | -------- |
| `/Users/mikeliu/Desktop/tuzi-fuke`               | `main`                        | ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬ |
| `/Users/mikeliu/Desktop/tuzi-fuke-explore`       | `feature/explore`             | æ¢ç´¢åŠŸèƒ½å¼€å‘   |
| `/Users/mikeliu/Desktop/tuzi-fuke-building`      | `feature/building-system`     | å»ºç­‘ç³»ç»Ÿå¼€å‘   |
| `/Users/mikeliu/Desktop/tuzi-fuke-communication` | `feature/communication-L4-L5` | é€šè®¯ç³»ç»Ÿå¼€å‘   |

### å¯è§†åŒ–ç»“æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Git ä»“åº“ (Repository)                             â”‚
â”‚                    tuzi-fuke                                         â”‚
â”‚                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                      åˆ†æ”¯ (Branches)                           â”‚ â”‚
â”‚   â”‚                                                                â”‚ â”‚
â”‚   â”‚   main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚ â”‚
â”‚   â”‚     â”‚                                                          â”‚ â”‚
â”‚   â”‚     â”œâ”€â”€ feature/explore â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚ â”‚
â”‚   â”‚     â”‚                                                          â”‚ â”‚
â”‚   â”‚     â”œâ”€â”€ feature/building-system â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚ â”‚
â”‚   â”‚     â”‚                                                          â”‚ â”‚
â”‚   â”‚     â””â”€â”€ feature/communication-L4-L5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚ â”‚
â”‚   â”‚                                                                â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ Worktree = ç»™åˆ†æ”¯ç‹¬ç«‹æ–‡ä»¶å¤¹
                                â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ tuzi-fuke   â”‚ â”‚ ğŸ“ tuzi-fuke-  â”‚ â”‚ ğŸ“ tuzi-fuke-  â”‚ â”‚ ğŸ“ tuzi-fuke-  â”‚
â”‚                â”‚ â”‚    explore     â”‚ â”‚    building    â”‚ â”‚  communication â”‚
â”‚ åˆ†æ”¯: main     â”‚ â”‚ åˆ†æ”¯: feature/ â”‚ â”‚ åˆ†æ”¯: feature/ â”‚ â”‚ åˆ†æ”¯: feature/ â”‚
â”‚                â”‚ â”‚      explore   â”‚ â”‚ building-systemâ”‚ â”‚ communication- â”‚
â”‚ (ä¸»ä»“åº“)       â”‚ â”‚ (worktree)     â”‚ â”‚ (worktree)     â”‚ â”‚    L4-L5       â”‚
â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚ (worktree)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€åæ€ä¸æ•™è®­

### ä¹‹å‰é‡åˆ°çš„é—®é¢˜

**é—®é¢˜ï¼š** ä»¥ä¸º `feature/explore` å·²ç»åˆå¹¶åˆ° mainï¼Œä½†å®é™…æ²¡æœ‰

**åŸå› ï¼š**

1. è¯¯ä»¥ä¸º `feature/explore` æ˜¯ worktreeï¼ˆç‹¬ç«‹ç›®å½•ï¼‰
2. å®é™…ä¸Šåœ¨ main ç›®å½•é‡Œåˆ‡æ¢åˆ°äº† `feature/explore` åˆ†æ”¯å¼€å‘
3. å¼€å‘å®Œåå¿˜è®°åˆå¹¶å› main

**æ•™è®­ï¼š**

- Worktree æ˜¯ç‹¬ç«‹æ–‡ä»¶å¤¹ï¼Œæœ‰å¯¹åº”çš„ç‰©ç†è·¯å¾„
- åˆ†æ”¯åªæ˜¯ Git é‡Œçš„ç‰ˆæœ¬çº¿ï¼Œå¯ä»¥åœ¨ä»»ä½• worktree é‡Œåˆ‡æ¢
- å¼€å‘å‰å…ˆç¡®è®¤ï¼š`git branch --show-current`

### æ­£ç¡®çš„å·¥ä½œæµç¨‹

```bash
# 1. ç¡®è®¤å½“å‰åœ¨å“ªä¸ªåˆ†æ”¯
git branch --show-current

# 2. åœ¨å¯¹åº”çš„ worktree æ–‡ä»¶å¤¹é‡Œå¼€å‘
#    ä¾‹å¦‚ï¼šæ¢ç´¢åŠŸèƒ½ â†’ /tuzi-fuke-explore
#         å»ºç­‘åŠŸèƒ½ â†’ /tuzi-fuke-building

# 3. å¼€å‘å®Œæˆåï¼Œåˆå¹¶åˆ° main
cd /Users/mikeliu/Desktop/tuzi-fuke  # ä¸»ä»“åº“
git merge feature/explore            # åˆå¹¶æ¢ç´¢åˆ†æ”¯

# 4. è§£å†³å†²çªï¼ˆå¦‚æœ‰ï¼‰ï¼Œæäº¤
```

---

## å…­ã€ç»™ AI çš„æç¤ºè¯æ¨¡æ¿

### åœ¨ç‰¹å®š Worktree å¼€å‘

```
æˆ‘çš„å·¥ä½œç›®å½•æ˜¯ /Users/mikeliu/Desktop/tuzi-fuke-exploreï¼Œå¯¹åº” feature/explore åˆ†æ”¯ã€‚

è¿™æ˜¯æ¢ç´¢åŠŸèƒ½çš„å¼€å‘ç›®å½•ï¼Œè¯·åœ¨è¿™ä¸ªç›®å½•ç»§ç»­å¼€å‘æ¢ç´¢ç›¸å…³åŠŸèƒ½ã€‚

å¼€å‘å®Œæˆåï¼Œæˆ‘ä¼šæ‰‹åŠ¨åˆå¹¶åˆ° main åˆ†æ”¯ã€‚
```

### åˆå¹¶åˆ†æ”¯åˆ° main

```
æˆ‘ç°åœ¨åœ¨ /Users/mikeliu/Desktop/tuzi-fukeï¼Œå¯¹åº” main åˆ†æ”¯ã€‚

è¯·å¸®æˆ‘æŠŠ feature/explore åˆ†æ”¯åˆå¹¶åˆ° mainï¼š

1. æ‰§è¡Œ git merge feature/explore
2. å¦‚æœæœ‰å†²çªï¼Œè¯·å¸®æˆ‘è§£å†³ï¼Œä¿ç•™ä¸¤è¾¹çš„åŠŸèƒ½
3. åˆå¹¶å®Œæˆåæäº¤
```

---

## ä¸ƒã€å¸¸ç”¨ Git å‘½ä»¤

### Worktree ç›¸å…³

```bash
# æŸ¥çœ‹æ‰€æœ‰ worktree
git worktree list

# åˆ›å»ºæ–° worktree
git worktree add ../tuzi-fuke-æ–°åŠŸèƒ½ feature/æ–°åŠŸèƒ½åˆ†æ”¯

# åˆ é™¤ worktree
git worktree remove ../tuzi-fuke-æŸåŠŸèƒ½
```

### åˆ†æ”¯ç›¸å…³

```bash
# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch --show-current

# æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯
git branch -a

# åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/æ–°åŠŸèƒ½

# åˆ‡æ¢åˆ†æ”¯
git checkout main

# åˆå¹¶åˆ†æ”¯
git merge feature/æŸåŠŸèƒ½
```

---

## å…«ã€è¯¾ç¨‹é¡¹ç›®å»ºè®®ç»“æ„

å¦‚æœå¼€è¯¾ç¨‹ï¼Œå»ºè®®è¿™æ ·ç»„ç»‡ï¼š

```
ã€è€å¸ˆä¸»ä»“åº“ã€‘
tuzi-earthlord (å®Œæ•´é¡¹ç›®)
    â”‚
    â”œâ”€â”€ main â† å®Œæ•´åŠŸèƒ½
    â”‚
    â””â”€â”€ å„åŠŸèƒ½åˆ†æ”¯ï¼ˆä¾›å­¦å‘˜å‚è€ƒï¼‰


ã€å­¦å‘˜ä»“åº“ã€‘(Fork è€å¸ˆçš„)
å­¦å‘˜A/tuzi-earthlord
    â”‚
    â”œâ”€â”€ main
    â”‚
    â”œâ”€â”€ feature/territory      â† åœˆåœ°åŠŸèƒ½
    â”œâ”€â”€ feature/explore        â† æ¢ç´¢åŠŸèƒ½
    â”œâ”€â”€ feature/building       â† å»ºé€ åŠŸèƒ½
    â”œâ”€â”€ feature/communication  â† é€šè®¯åŠŸèƒ½
    â”‚       â”‚
    â”‚       â”‚  ç»†åˆ†ï¼ˆå¯é€‰ï¼‰ï¼š
    â”‚       â”œâ”€â”€ feature/communication-realtime  â† å®æ—¶é€šä¿¡
    â”‚       â”œâ”€â”€ feature/communication-channel   â† å®˜æ–¹é¢‘é“
    â”‚       â””â”€â”€ feature/communication-device    â† è®¾å¤‡ç³»ç»Ÿ
    â”‚
    â”œâ”€â”€ feature/backpack       â† èƒŒåŒ…åŠŸèƒ½
    â””â”€â”€ feature/trade          â† äº¤æ˜“åŠŸèƒ½
```

---

## ä¹ã€æ€»ç»“é€ŸæŸ¥è¡¨

| æ¦‚å¿µ         | æ˜¯ä»€ä¹ˆ      | å¿…é¡»çš„å— | æ¯”å–»     |
| ---------- | -------- | ---- | ------ |
| Repository | Git ä»“åº“   | âœ… å¿…é¡» | æ•´æœ¬ä¹¦    |
| Branch     | åˆ†æ”¯ï¼Œä»£ç ç‰ˆæœ¬çº¿ | âœ… å¿…é¡» | ä¸åŒæ•…äº‹çº¿  |
| `feature/` | å‘½åè§„èŒƒ     | âŒ å¯é€‰ | ç« èŠ‚æ ‡é¢˜å‰ç¼€ |
| Worktree   | åˆ†æ”¯çš„ç‹¬ç«‹æ–‡ä»¶å¤¹ | âŒ å¯é€‰ | ä¸åŒä¹¦æ¡Œ   |

**æ ¸å¿ƒè®°å¿†ï¼š**

```
åˆ†æ”¯ = æ•…äº‹çº¿ï¼ˆå¿…é¡»æœ‰ï¼‰
Worktree = ç»™æ•…äº‹çº¿ä¸€ä¸ªç‹¬ç«‹ä¹¦æ¡Œï¼ˆå¯é€‰ï¼Œæ–¹ä¾¿åŒæ—¶å†™å¤šä¸ªæ•…äº‹ï¼‰
feature/ = å‘½åè§„èŒƒï¼Œè¡¨ç¤º"è¿™æ˜¯åŠŸèƒ½å¼€å‘"
```

---

*æ–‡æ¡£åˆ›å»ºäº 2025-12-03ï¼ŒåŸºäº tuzi-fuke é¡¹ç›®å¼€å‘ç»éªŒæ•´ç†*
